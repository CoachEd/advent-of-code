<!DOCTYPE html>
<html lang="en">
<head>
  <title>Stars</title>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
</head>

<body>

  <div data-ng-app="MyApp" data-ng-controller="MyController">
        <button data-ng-click="redraw(1)">Next</button><br>
    <canvas id="myCanvas" width="1000" height="1000" style="border:1px;"></canvas>

  </div>
  
  <script>
  
    <!-- get the canvas context -->
    var canvas = document.getElementById("myCanvas");
    var ctx = canvas.getContext("2d");
    var stars = [
[206,132,4,1],
[215,140,-4,1],
[206,135,5,-2],
[239,140,3,-2],
[184,135,-3,3],
[203,132,3,2],
[182,135,2,3],
[238,133,-5,5],
[219,132,2,-4],
[202,135,4,-3],
[206,139,-3,1],
[235,140,-5,-5],
[214,132,-4,3],
[239,131,3,-4],
[211,134,2,-3],
[243,139,-2,-4],
[199,135,5,4],
[187,131,2,-5],
[238,139,-1,-5],
[182,139,5,-3],
[183,135,-2,3],
[219,133,-2,-2],
[210,135,-5,-2],
[241,140,5,1],
[198,133,4,-5],
[206,139,3,-5],
[191,131,3,-5],
[226,135,1,1],
[222,138,4,-3],
[182,137,4,-2],
[214,140,1,-2],
[241,140,-4,-5],
[190,137,4,-3],
[206,132,-1,2],
[230,138,3,-2],
[243,139,2,3],
[214,137,5,-3],
[190,140,-2,4],
[233,133,-1,-3],
[211,131,3,-4],
[198,133,-3,-1],
[238,135,1,-1],
[206,133,5,-2],
[218,135,-2,5],
[182,134,-1,1],
[219,134,4,4],
[214,138,1,2],
[198,136,-2,3],
[198,136,2,-5],
[230,131,3,1],
[190,136,-4,1],
[182,139,-1,-2],
[224,131,-4,2],
[215,131,-5,4],
[214,139,-1,2],
[195,139,-2,-4],
[230,133,-2,-2],
[198,133,2,-2],
[218,140,4,-5],
[182,136,1,-5],
[190,135,4,1],
[214,140,-3,-3],
[194,137,4,-1],
[198,140,5,4],
[230,136,1,-2],
[238,135,-4,-2],
[209,135,-3,-4],
[238,138,1,-5],
[222,135,-3,-5],
[190,134,-1,2],
[190,138,2,-5],
[182,139,2,1],
[240,131,4,2],
[206,137,-1,4],
[187,134,-3,-5],
[243,138,3,3],
[219,139,-2,4],
[222,134,5,-1],
[182,133,3,4],
[219,132,3,-1],
[239,140,-1,-1],
[192,135,-1,-3],
[238,139,-4,1],
[190,133,5,-4],
[222,131,4,2],
[187,132,1,1],
[214,135,3,2],
[219,137,-1,4],
[195,139,-3,-2],
[187,139,-4,5],
[234,139,-2,-1],
[190,132,-3,1],
[200,131,2,-5],
[214,134,3,4],
[222,139,4,5],
[230,133,4,-4],
[185,135,1,3],
[187,138,4,-2],
[190,132,-3,-3],
[222,133,3,-1],
[238,137,-2,-1],
[214,136,4,5],
[194,137,1,3],
[243,138,-3,-2],
[206,131,1,3],
[190,131,1,-2],
[238,133,-2,5],
[198,138,4,5],
[242,139,3,-5],
[222,136,-4,2],
[187,140,2,4],
[234,139,-1,-4],
[222,137,-1,4],
[190,131,-2,3],
[214,140,3,5],
[184,135,-3,-1],
[217,140,-5,4],
[232,134,3,2],
[201,135,2,4],
[187,132,-4,-5],
[225,136,2,5],
[187,131,2,-3],
[230,138,-1,-4],
[233,138,-4,3],
[190,135,-2,4],
[211,137,-3,2],
[238,135,1,-4],
[222,135,1,-5],
[184,135,-3,-1],
[230,137,-3,-1],
[222,140,3,2],
[238,138,3,2],
[231,136,-1,5],
[234,132,-1,1],
[233,138,-2,-2],
[198,137,1,1],
[243,136,-1,4],
[240,131,-4,3],
[198,139,-3,-2],
[211,136,-3,-2],
[182,136,4,-2],
[223,135,1,4],
[214,131,-2,-5],
[206,133,2,-5],
[232,134,-5,2],
[182,135,-5,-4],
[226,131,-3,1],
[194,138,1,1],
[218,135,3,2],
[195,133,-4,4],
[206,140,-4,-2],
[242,131,-3,1],
[240,140,2,-5],
[182,133,5,-3],
[192,131,3,-3],
[206,135,2,1],
[198,139,1,2],
[199,135,1,-4],
[195,132,-5,3],
[206,137,-4,-4],
[234,132,-5,2],
[219,133,-5,2],
[206,136,-4,-1],
[227,139,4,-1],
[230,140,5,5],
[214,139,-3,2],
[191,135,-4,-3],
[238,132,4,-4],
[233,138,-5,-1],
[208,135,-3,-5],
[198,140,2,1],
[222,132,3,5],
[216,131,3,-1],
[208,135,2,-1],
[214,135,2,5],
[195,134,-4,-1],
[225,136,2,4],
[190,139,2,-2],
[211,136,-5,3],
[211,133,5,-3],
[224,135,3,-1],
[202,131,5,-2],
[234,139,-1,4],
[190,134,-2,-3],
[195,140,4,-2],
[195,133,-2,3],
[243,132,-4,3],
[232,134,3,5],
[230,131,4,3],
[226,138,-3,5],
[223,135,1,1],
[218,135,-4,1],
[190,131,1,-1],
[206,132,2,-4],
[219,139,-2,-4],
[231,135,1,-3],
[214,136,-3,-4],
[198,138,-2,5],
[198,134,3,-3],
[208,135,-4,5],
[226,135,-5,-4],
[216,140,1,1],
[182,131,-5,1],
[243,137,-5,-5],
[182,138,-2,2],
[190,139,2,-3],
[190,133,5,-1],
[186,135,-3,-5],
[216,135,4,-1],
[209,135,5,-2],
[203,133,-4,-4],
[187,134,4,5],
[226,138,4,-3],
[243,140,1,2],
[219,133,-1,-1],
[226,137,-4,2],
[215,135,5,-3],
[206,139,4,4],
[243,140,-3,5],
[225,131,1,-1],
[187,135,5,4],
[223,131,-4,-1],
[187,132,5,-3],
[219,137,-3,1],
[230,134,-3,-3],
[201,135,2,-4],
[187,138,5,-4],
[224,131,2,-3],
[214,132,-1,4],
[238,132,-1,-5],
[215,135,-2,-3],
[230,136,2,3],
[195,132,3,-2],
[222,137,3,-3],
[211,132,-4,4],
[211,139,3,-4],
[198,135,3,2],
[206,134,3,-2],
[241,136,-4,5],
[194,135,-3,2],
[211,131,-3,-5],
[195,139,-4,-1],
[194,131,4,5],
[222,139,-2,-3],
[206,135,-3,-5],
[206,131,-1,-5],
[230,139,-4,1],
[193,136,5,2],
[227,133,-4,-2],
[193,135,4,-3],
[216,131,-2,4],
[211,140,-5,-5],
[222,131,-4,5],
[198,132,-2,3],
[214,131,-1,-5],
[193,135,1,-4],
[211,137,-3,-5],
[216,140,-4,-2],
[198,134,-5,5],
[187,136,5,1],
[238,137,-2,4],
[243,132,3,3],
[242,136,3,-5],
[190,133,3,-5],
[222,133,-3,1],
[182,133,-3,1],
[239,131,1,4],
[223,135,-4,-1],
[215,135,-2,-3],
[211,138,3,-2],
[193,131,3,-2],
[190,132,-4,-4],
[192,135,4,-2],
[218,131,-3,-1],
[198,138,2,-4],
[203,134,-4,-4],
[198,132,-5,3],
[231,135,-3,-2],
[222,140,-4,1],
[193,135,2,4],
[227,132,5,-3],
[187,133,-2,5],
[222,140,-4,-5],
[225,135,-2,-4],
[222,135,-2,-4],
[214,133,-4,2],
[201,131,5,-1],
[227,139,-5,-1],
[222,139,-5,-4],
[190,134,-4,1],
[199,131,-2,4],
[203,134,-3,-1],
[198,137,5,-1],
[201,131,5,2],
[198,135,-3,5],
[211,139,5,-1],
[187,136,-4,-2],
[241,131,1,5],
[230,132,-3,-2],
[182,132,-3,-5],
[191,135,1,-4],
[238,136,3,5],
[187,133,4,-1],
[226,138,-5,-4],
[206,131,-5,-4],
[241,131,2,-1],
[187,135,-4,-1],
[243,136,-2,2],
[211,136,-4,-4],
[219,134,-2,4],
[201,131,5,4],
[214,138,3,-2],
[222,133,-5,4],
[214,135,4,-3],
[214,134,1,5],
[206,133,-3,-1],
[219,136,2,3],
[219,137,-1,-5],
[211,135,-5,3],
[190,137,5,-2],
[238,139,-3,1],
[219,138,-1,2],
[202,131,-4,-3],
[230,140,-5,5],
[232,137,-5,-2],
[235,131,-3,-1],
[217,131,4,-5],
[238,136,-3,3],
[183,135,3,-1],
[227,139,1,-4],
[206,140,-3,1],
[242,136,2,-2],
[210,135,2,2],
[243,132,-3,2],
[230,135,1,2],
[239,131,-1,-3],
[209,135,-4,-3],
[194,138,1,1],
[230,139,-3,-4],
[238,134,5,3],
[190,136,5,-1],
[238,133,4,-3],
[182,140,4,-2],
[219,136,5,-1],
[195,134,-5,-3],
[187,139,-4,-3],
[214,133,-1,-3],
[219,132,2,-3],
[217,135,3,-3],
[216,131,2,1],
[224,131,1,-2],
[225,135,1,5],
[214,137,1,-3],
[232,137,4,5],
[194,137,-2,3],
[219,134,-2,5],
[241,140,1,2],
[182,136,3,1],
[187,140,-4,-1],
[214,137,3,-5],
[227,140,-2,-2],
[200,135,5,3],
[211,140,-1,3],
[211,138,-5,2],
[206,138,5,5],
[225,136,1,2],
[198,139,1,4],
[203,132,4,-3],
[230,136,3,-4],
[227,134,1,2],
[230,132,-2,-1],
[238,136,-5,-4],
[187,140,5,2],
[198,134,1,5],
[243,137,1,-2],
[202,135,5,1],
[207,135,-2,-5],
[222,132,-5,3],
[198,135,-4,-2],
[215,131,4,1],
[190,135,3,-4],
[216,135,5,-2],
[191,131,-3,-5],
[235,140,-1,-4],
[190,136,-4,4],
[223,131,3,-3],
[187,137,-1,1],
[193,131,4,4],
[211,137,-1,-1],
[191,131,-1,2],
[182,138,-1,3],
[211,135,5,-5],
[198,131,4,4],
[238,138,-1,1],
[182,135,2,2]
    ];
    var offset = 10;
    var width = 1000;
    var height = 1000;
    var radius = 1;
    var clicks = 0;

    angular.module('MyApp', []).controller('MyController', ['$scope', function($scope) {
      
      //INIT
      //set the canvas background to light sky blue
      ctx.fillStyle="black";
      ctx.fillRect(0,0,width,height);

      for (var i=0; i < stars.length; i++) {
        x = stars[i][0]-1+offset;
        y = stars[i][1]-1+offset;
        ctx.beginPath();
        console.log(x + "," + y);
        ctx.arc(x,y, radius, 0, 2 * Math.PI);
        ctx.fillStyle = "white";
        ctx.fill();
      }
      
      $scope.redraw = function(n) {
        clicks++;
        //set the canvas background to light sky blue
        ctx.fillStyle="black";
        ctx.fillRect(0,0,width,height);

        for (var x=0; x < n; x++) {
          for (var i=0; i < stars.length; i++) {
            addx = stars[i][2];
            addy = stars[i][3];
            stars[i][0] = stars[i][0] + addx
            stars[i][1] = stars[i][1] + addy
          }
        }
        
        //draw it
        for (var i=0; i < stars.length; i++) {
          x = stars[i][0]-1+offset;
          y = stars[i][1]-1+offset;
          ctx.beginPath();
          //console.log(x + "," + y);
          ctx.arc(x,y, radius, 0, 2 * Math.PI);
          ctx.fillStyle = "white";
          ctx.fill();
        }

        console.log(clicks);
      };

      
    }]);

  </script>  
  
</body>


</html>
